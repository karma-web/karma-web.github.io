<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>js边角小知识 | karma's blog</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><script>var GLOBAL = { 
  root: '/',
  algolia: {"appId":"ECSWVW15TH","apiKey":"bf7e0c5ae9ee1a46a235d0df54d9659c","indexName":"myblog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><link rel="icon" href="/favicon.ico"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="文章详情">Blog概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript小众系列开始更新啦"><span class="toc-number">1.</span> <span class="toc-text">JavaScript小众系列开始更新啦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#先看实验代码"><span class="toc-number"></span> <span class="toc-text">先看实验代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前置知识"><span class="toc-number"></span> <span class="toc-text">前置知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#假值"><span class="toc-number">1.</span> <span class="toc-text">假值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#"><span class="toc-number">2.</span> <span class="toc-text">!</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined-null"><span class="toc-number">3.</span> <span class="toc-text">undefined == null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ToPrimitive"><span class="toc-number">4.</span> <span class="toc-text">ToPrimitive</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#计算-x-y-规则"><span class="toc-number"></span> <span class="toc-text">计算 x == y 规则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#x，y如果类型相同"><span class="toc-number">1.</span> <span class="toc-text">x，y如果类型相同</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重点：x，y类型不同"><span class="toc-number">2.</span> <span class="toc-text">重点：x，y类型不同</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#x，y一方为布尔值"><span class="toc-number">2.1.</span> <span class="toc-text">x，y一方为布尔值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#x，y为数字和字符串"><span class="toc-number">2.2.</span> <span class="toc-text">x，y为数字和字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#x，y一方为对象"><span class="toc-number">2.3.</span> <span class="toc-text">x，y一方为对象</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#计算示例代码结果"><span class="toc-number"></span> <span class="toc-text">计算示例代码结果</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-true"><span class="toc-number">1.</span> <span class="toc-text">2 == true</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-false"><span class="toc-number">2.</span> <span class="toc-text">2 == false</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#false"><span class="toc-number">3.</span> <span class="toc-text">[] == false</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#“0”-false"><span class="toc-number">4.</span> <span class="toc-text">“0” == false</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#终极版"><span class="toc-number">5.</span> <span class="toc-text">终极版 [] == ![]</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://avatars2.githubusercontent.com/u/17785285?v=4&amp;s=460"></div><div class="author-info__name text-center">karma</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">26</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">27</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">6</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://github.com/fouber/blog" target="_blank">Fouber</a><a class="author-info-links__name text-center" href="https://www.jiumodiary.com/" target="_blank">Jiumodiary</a><a class="author-info-links__name text-center" href="http://chuangzaoshi.com/" target="_blank">Creative</a><a class="author-info-links__name text-center" href="http://antv.alipay.com/zh-cn/index.html" target="_blank">AntV数据可视化</a><a class="author-info-links__name text-center" href="http://www.cnblogs.com/sskyy/" target="_blank">候振宇</a><a class="author-info-links__name text-center" href="http://janhuenermann.com/" target="_blank">德国天才</a><a class="author-info-links__name text-center" href="http://www.ruanyifeng.com/blog/" target="_blank">ruanyf</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cn.bing.com/az/hprichbg/rb/CorricellaMarina_ZH-CN11169480773_1920x1080.jpg);"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">karma's blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span></div><div id="post-info"><div id="post-title">js边角小知识</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-02-06 </time><span class="post-meta__separator"> | </span><i class="fa fa-inbox" aria-hidden="true"> </i><a class="post-meta__categories" href="/categories/技术/"> 技术  </a></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><h3 id="JavaScript小众系列开始更新啦"><a href="#JavaScript小众系列开始更新啦" class="headerlink" title="JavaScript小众系列开始更新啦"></a>JavaScript小众系列开始更新啦</h3><p>——何时完结不确定，写多少看我会多少！这是已经更新的地址：</p>
<ul>
<li>小众系列之按位非运算符：<a href="https://github.com/Aaaaaaaty/Blog/issues/22" target="_blank" rel="external">JavaScript中奇特的~运算符</a></li>
<li>小众系列之终极类型转换：<a href="https://github.com/Aaaaaaaty/Blog/issues/15" target="_blank" rel="external">从hello world看JavaScript隐藏的黑魔法制</a></li>
<li>小众系列之隐式类型转换：<a href="https://github.com/Aaaaaaaty/Blog/issues/14" target="_blank" rel="external">从[] == ![]看隐式强制转换机制</a></li>
<li>小众系列之事件循环：<a href="https://github.com/Aaaaaaaty/Blog/issues/13" target="_blank" rel="external">从HTML5与PromiseA+规范来看事件循环</a></li>
</ul>
<p>这个系列旨在对一些人们不常用遇到的知识点，以及可能常用到但不曾深入了解的部分做一个重新梳理，虽然可能有些部分看起来没有什么用，因为平时开发真的用不到！但个人认为糟粕也好精华也罢里面全部蕴藏着JS一些偏本质的东西或者说底层规范，如果能适当避开舒适区来看这些小细节，也许对自己也会有些帮助~文章更新在我的博客，欢迎不定期关注。</p>
<h2 id="先看实验代码"><a href="#先看实验代码" class="headerlink" title="先看实验代码"></a>先看实验代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">2 == true               //false</div><div class="line">2 == false              //false</div><div class="line">[] == false             //true</div><div class="line">&quot;0&quot; == false            //true</div><div class="line">[] == ![]               //true 神奇吧</div></pre></td></tr></table></figure>
<p>我相信大部分的童鞋看着这种等式一般的反应都是xxx是真值，可以转换为true。xxx是假的所以是false！好的摒弃这种想法吧，不然也不会出现这么多神奇的结果了，我们需要做的是通过一步步计算来得出结论。</p>
<h2 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h2><p>这部分知识属于真·死记硬背，因为你问我为什么，我只能说规范就是这么定义的。</p>
<h3 id="假值"><a href="#假值" class="headerlink" title="假值"></a>假值</h3><p>为什么提到假值，而不是真值是因为真值真的是太！多！了！但是假值只有以下这么几个：</p>
<ul>
<li>undefined</li>
<li>null</li>
<li>false</li>
<li>+0、-0、NaN</li>
<li>“”</li>
</ul>
<p>除此以外别的值做强制类型转换的时候都是真值，so记住就好。<br>PS：有兴趣的同学可以试试<code>new Number(0)</code>之类的通过对象包装的假值的结果，不过这并不常用故不属于本次讨论范畴。</p>
<h3 id=""><a href="#" class="headerlink" title="!"></a>!</h3><p>! 这个运算符，会进行显式强制转化，将结果转化为布尔值即true或false。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">![] //false</div><div class="line">!1  //false</div><div class="line">!0  //true</div></pre></td></tr></table></figure>
<p>以此类推来进行显式的强制转换</p>
<h3 id="undefined-null"><a href="#undefined-null" class="headerlink" title="undefined == null"></a>undefined == null</h3><p>参考<a href="http://yanhaijing.com/es5/#203" target="_blank" rel="external">规范11.9.3节</a>抽象相等比较算法可得出<br>undefined == null 为true的结论。<br>PS：本次计算规则为抽象相等比较算法的总结，细节可参考上文11.9.3节规范。</p>
<h3 id="ToPrimitive"><a href="#ToPrimitive" class="headerlink" title="ToPrimitive"></a>ToPrimitive</h3><p><a href="https://user-images.githubusercontent.com/15126694/29483875-9484aa3a-84e4-11e7-9583-e4fb4aa7baa0.png" target="_blank" rel="external"><img src="https://user-images.githubusercontent.com/15126694/29483875-9484aa3a-84e4-11e7-9583-e4fb4aa7baa0.png" alt="image"></a><br>这是<a href="http://yanhaijing.com/es5/#103" target="_blank" rel="external">规范9.1节</a>的内容，简单来说你只需要知道如果某个对象（[], {}）之类的要进行隐式类型转换，那么里面会顺序执行两个操作。即<code>x.valueOf().toString()</code>。这里有一个不常用的点要注意。我说的是对象类型进行“隐式”类型转化，如果是显式则不是如此。看下例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var a = &#123;</div><div class="line">    valueOf: () =&gt; 1,</div><div class="line">    toString: () =&gt; 233</div><div class="line">&#125;</div><div class="line">a + &quot;&quot;     // 1</div><div class="line">String(a)  // 233</div></pre></td></tr></table></figure>
<p>隐式转化是按照先valueOf后toString的顺序执行，如果显式调用会直接执行oString，不过显式调用在js中覆盖率没有隐式的多，知道即可。</p>
<h2 id="计算-x-y-规则"><a href="#计算-x-y-规则" class="headerlink" title="计算 x == y 规则"></a>计算 x == y 规则</h2><h3 id="x，y如果类型相同"><a href="#x，y如果类型相同" class="headerlink" title="x，y如果类型相同"></a>x，y如果类型相同</h3><p>这个部分相信有问题的同学百度一下就好。数字的比大小，字符串比大小。里面需要小心的就是NaN != NaN 以及 对象如何比较大小？（[1] != [1]）</p>
<h3 id="重点：x，y类型不同"><a href="#重点：x，y类型不同" class="headerlink" title="重点：x，y类型不同"></a>重点：x，y类型不同</h3><h4 id="x，y一方为布尔值"><a href="#x，y一方为布尔值" class="headerlink" title="x，y一方为布尔值"></a>x，y一方为布尔值</h4><p>如果x，y其中一个是布尔值，那么对这个布尔值进行toNumber操作。发现问题了么童鞋们，来看下面代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">42 == true   // false</div></pre></td></tr></table></figure>
<p>不了解规范的会认为，42是真值啊！42会转换为true！你别说如<code>if(42){}</code>这个42确实是真值。但是我们现在在讨论“==”下的转换，那么请记住规范规定了：类型不同时若一方是布尔值，是对布尔值进行类型转化即<code>true =&gt; 1</code>，之后我们就可以理解为什么42不等于true了因为<code>1!= 42</code></p>
<h4 id="x，y为数字和字符串"><a href="#x，y为数字和字符串" class="headerlink" title="x，y为数字和字符串"></a>x，y为数字和字符串</h4><p>将字符串的一方进行toNumber()操作，这个不难理解哈</p>
<h4 id="x，y一方为对象"><a href="#x，y一方为对象" class="headerlink" title="x，y一方为对象"></a>x，y一方为对象</h4><p>将对象进行ToPrimitive()操作。如何操作见上文。</p>
<h2 id="计算示例代码结果"><a href="#计算示例代码结果" class="headerlink" title="计算示例代码结果"></a>计算示例代码结果</h2><h3 id="2-true"><a href="#2-true" class="headerlink" title="2 == true"></a>2 == true</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">true =&gt; 一方为布尔值：true =&gt; 1</div><div class="line">2 != 1</div></pre></td></tr></table></figure>
<h3 id="2-false"><a href="#2-false" class="headerlink" title="2 == false"></a>2 == false</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">true =&gt; 一方为布尔值：false =&gt; 0</div><div class="line">2 != 0</div></pre></td></tr></table></figure>
<h3 id="false"><a href="#false" class="headerlink" title="[] == false"></a>[] == false</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1、[]为对象： ToPrimitive([]) =&gt; [].valueOf().toString() =&gt; &quot;&quot;</div><div class="line">2、false为布尔：false =&gt; 0</div><div class="line">3、等式变为：&quot;&quot; == 0</div><div class="line">4、一方为数字，一方为字符</div><div class="line">    Number(&quot;&quot;) =&gt; 0</div><div class="line">    =&gt; 0 == 0</div></pre></td></tr></table></figure>
<h3 id="“0”-false"><a href="#“0”-false" class="headerlink" title="“0” == false"></a>“0” == false</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1、false为布尔：false =&gt; 0</div><div class="line">2、等式变为：&quot;0&quot; == 0</div><div class="line">3、一方为数字，一方为字符</div><div class="line">    Number(&quot;0&quot;) =&gt; 0</div><div class="line">    =&gt; 0 == 0</div></pre></td></tr></table></figure>
<h3 id="终极版"><a href="#终极版" class="headerlink" title="终极版 [] == ![]"></a>终极版 [] == ![]</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1、左侧[]为对象： ToPrimitive([]) =&gt; [].valueOf().toString() =&gt; &quot;&quot;</div><div class="line">2、右侧![]先进行显式类型转换：false(除了上文提到的假值剩下都是真值)</div><div class="line">3、等式变为： &quot;&quot; == false</div><div class="line">4、一方为布尔：false =&gt; 0</div><div class="line">5、等式变为：&quot;&quot; == 0</div><div class="line">5、一方为数字，一方为字符</div><div class="line">    Number(&quot;&quot;) =&gt; 0</div><div class="line">    =&gt; 0 == 0</div></pre></td></tr></table></figure>
<p>所以你会发现这些看起来神奇的效果，不过是一步步按照规则进行强制转换罢了。希望以后大家再遇到这种神奇等式的时候不要靠记忆谁是谁，而是一步步推算你会发现结果也不过如此，扮猪吃老虎罢了~</p>
<blockquote>
<p>原文地址：<a href="https://github.com/Aaaaaaaty/blog/issues/14" target="_blank" rel="external">https://github.com/Aaaaaaaty/blog/issues/14</a></p>
</blockquote>
</div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/js/">js</a></div></article><nav id="pagination"><div class="prev-post pull-left"><a href="/最强二手车购车宝典/"><i class="fa fa-chevron-left">  </i><span>最强二手车购车宝典</span></a></div><div class="next-post pull-right"><a href="/比特币的前世今生/"><span>比特币的前世今生</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">©2017 - 2018 By karma</div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/fancybox.js"></script><script src="/js/sidebar.js"></script><script src="/js/copy.js"></script><script src="/js/fireworks.js"></script><script src="/js/transition.js"></script><script src="/js/scroll.js"></script><script src="/js/head.js"></script><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5a27ad844cef8ec2"></script></body></html>